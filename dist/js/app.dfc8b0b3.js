(function(){"use strict";var e={8448:function(e,t,n){var o=n(5130),a=n(6768);function r(e,t){const n=(0,a.g2)("router-link"),o=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("nav",null,[(0,a.bF)(n,{to:"/"},{default:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.eW)("Dashboard")]))),_:1}),t[2]||(t[2]=(0,a.eW)(" | ")),(0,a.bF)(n,{to:"/settings"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.eW)("Settings")]))),_:1})]),(0,a.bF)(o)],64)}var i=n(1241);const s={},l=(0,i.A)(s,[["render",r]]);var c=l,u=n(1387),d=(n(1454),n(144)),f=n(1175),g=n(9628),p=n.n(g);const m={class:"video-strip"},v={class:"video-container"};var h={__name:"RgbVideoFeed",setup(e){let t=null,n=null,o=null;const r=(0,d.KR)(null),i=(0,d.KR)(null);function s(e,t){if(!e)return;let n=`data:image/jpeg;base64,${e}`;const o=t.value,a=o.getContext("2d"),r=new Image;r.src=n,r.onload=()=>{a.clearRect(0,0,600,300),a.drawImage(r,0,0,600,300)}}const l=()=>{n=new(p().Topic)({ros:t,name:"/cam1_image_preview",messageType:"sensor_msgs/CompressedImage"}),n.subscribe((e=>{try{console.log(`Message format=${e.format}`),s(e.data,r)}catch(t){console.error("Failed to decode message")}})),o=new(p().Topic)({ros:t,name:"/cam2_image_preview",messageType:"sensor_msgs/CompressedImage"}),o.subscribe((e=>{try{console.log(`Message format=${e.format}`),s(e.data,i)}catch(t){console.error("Failed to decode message")}}))},c=()=>{t=new(p().Ros)({url:"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname?"ws://localhost:9090":"ws://37.157.77.203:9090"}),t.on("connection",(()=>{console.log("Connected to ROS!")})),t.on("error",(e=>{console.error("Error connecting to ROS: ",e)})),t.on("close",(()=>{console.warn("Disconnected from ROS!")}))};return(0,a.sV)((()=>{c(),l()})),(0,f.onBeforeUnmounted)((()=>{const e={left_image_canvas:r,right_image_canvas:i};for(let t=1;t<e.length;t++)if(e(t)){const n=e(t).getContext("2d");n.clearRect(0,0,600,300)}})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",m,[t[2]||(t[2]=(0,a.Lk)("h2",null,"ROS Video Feed",-1)),(0,a.Lk)("div",v,[(0,a.Lk)("div",null,[(0,a.Lk)("canvas",{ref_key:"left_image_canvas",ref:r,height:"300",width:"600"},null,512),t[0]||(t[0]=(0,a.Lk)("p",null,"Loading",-1))]),(0,a.Lk)("div",null,[(0,a.Lk)("canvas",{ref_key:"right_image_canvas",ref:i,height:"300",width:"600"},null,512),t[1]||(t[1]=(0,a.Lk)("p",null,"Loading",-1))])])]))}};const _=(0,i.A)(h,[["__scopeId","data-v-257d77a3"]]);var b=_,k=n(8561),y=n.n(k);const w={class:"container"},L={id:"visual_feeds"},C={class:"dashboard"},x={class:"video",id:"thermal_camera"},O={style:{flex:"1",border:"0px solid #CCC",position:"relative"}},E=["src","type"],F={key:1,style:{"text-align":"center",width:"400px",height:"300px"}},R={class:"video",id:"sat_image"},T={style:{flex:"1",border:"0px solid #CCC",position:"relative"}},S=["src","type"],X={key:1,style:{"text-align":"center",width:"300px",height:"300px"}};var j={__name:"DashboardView",setup(e){let t=null;const n=()=>{t=y().map("map").setView([59.3922,24.65],13),y().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Leaflet"}).addTo(t)};return(0,a.sV)((()=>{n()})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",w,[(0,a.Lk)("div",L,[(0,a.Lk)("div",C,[t[0]||(t[0]=(0,a.Lk)("h2",null,"Dashboard",-1)),(0,a.bF)(b)]),(0,a.Lk)("div",x,[(0,a.Lk)("div",O,[e.thermal_camera_feed?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.thermal_camera_feed,type:e.type,alt:"Thernal camera Feed"},null,8,E)):((0,a.uX)(),(0,a.CE)("p",F,"Loading thermal camera feed")),t[1]||(t[1]=(0,a.Lk)("div",{class:"floating-label"},"Thermal",-1))])]),(0,a.Lk)("div",R,[(0,a.Lk)("div",T,[e.sat_image?((0,a.uX)(),(0,a.CE)("img",{key:0,src:e.sat_image_preview,type:e.type,alt:"Satellite image",style:{width:"300px",height:"300px"}},null,8,S)):((0,a.uX)(),(0,a.CE)("p",X,"Satellite image")),t[2]||(t[2]=(0,a.Lk)("div",{class:"floating-label"},"Thermal",-1))])])]),t[3]||(t[3]=(0,a.Lk)("div",{id:"map"},null,-1))]))}};const V=(0,i.A)(j,[["__scopeId","data-v-86901188"]]);var I=V;const A={class:"Settings-page"};function D(e,t){return(0,a.uX)(),(0,a.CE)("div",A,t[0]||(t[0]=[(0,a.Lk)("h2",{style:{color:"aquamarine"}},"Video feed settings",-1)]))}const K={},M=(0,i.A)(K,[["render",D]]);var W=M;const $=[{path:"/",name:"dashboard",component:I},{path:"/settings",name:"settings",component:W}],B=(0,u.aE)({history:(0,u.Bt)(),routes:$});var P=B,q=n(657);(0,o.Ef)(c).use((0,q.Ey)()).use(P).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[l])}))?o.splice(l--,1):(s=!1,r<i&&(i=r));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,i=o[0],s=o[1],l=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var u=l(n)}for(t&&t(o);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self["webpackChunkweb_ui_template"]=self["webpackChunkweb_ui_template"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(8448)}));o=n.O(o)})();
//# sourceMappingURL=app.dfc8b0b3.js.map